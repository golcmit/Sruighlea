# 開発日記 - 2025/08/11

## 今日の目標
- 「キャラクター詳細表示機能」の実装に着手し、TDDの開発サイクルを確立する。

## やったこと
1.  **開発プロセスの導入**:
    -   今後の開発方針として、テスト駆動開発（TDD）を導入することで合意。
    -   機能要求を管理するための `TASKS.md` を作成。
2.  **UI/UX改善**:
    -   `main.cpp` を修正し、アプリケーションのウィンドウサイズを変更した際に、キャラクターリストのテーブルも追従してリサイズされるように改善。
3.  **テスト環境の構築**:
    -   `QTest` フレームワークを利用するため、`tests` ディレクトリとテスト専用のプロジェクトファイル (`tests.pro`) をセットアップした。
4.  **TDDサイクルの実践 (Red-Green-Refactor)**:
    -   **Red**: `CharacterService`（キャラクター情報を取得するクラス）がまだ存在しない状態で、その機能を検証する失敗するテストを先行して作成した。
    -   **Green**: 失敗するテストをパスさせるため、データベースからIDでキャラクター情報を取得する最小限のコードを `CharacterService` に実装した。
    -   **Refactor**: コードの可読性と保守性を向上させるため、マジックナンバー（列の番号指定）をカラム名での指定に修正した。

## 成果
- TDDの開発サイクル（Red-Green-Refactor）を一周させ、テストに完全に裏付けられた `CharacterService` クラスを完成させることができた。
- これにより、今後の機能追加を、品質を担保しながら進めるための強固な土台ができた。

## 次のステップ
- 完成した `CharacterService` を利用して、UI上でユーザーがキャラクターを選択した際に、その詳細情報を画面に表示する機能（フロントエンド部分）を実装する。

---

# 開発日記 - 2025/08/10

## 今日の目標
- C++とQtを使ったGUIアプリのプロジェクト環境を構築し、データベースへの接続を確立する。

## やったこと
1.  **Qt環境のセットアップ**:
    -   `qmake`コマンドでQtのインストール状況を確認。
    -   未インストールだったため、`apt`を使って`qtcreator`, `qtbase5-dev`, `qt5-qmake`をインストールした。
2.  **プロジェクトファイル作成**:
    -   Qtプロジェクトファイル (`Sruighlea.pro`) を作成し、`core`, `gui`, `widgets`, `sql`モジュールを指定。
    -   アプリケーションのエントリーポイントとして`main.cpp`を作成。
3.  **データベース接続テスト**:
    -   `main.cpp`に`QSqlDatabase`を使って`FanacalCharacters.db`へ接続するコードを記述。
    -   ビルド時にインクルードエラーが発生。`.pro`ファイルに`widgets`モジュールが不足していたことが原因だった。
    -   `.pro`ファイルを修正後、ビルドと実行に成功。
    -   コンソールに "Database: connection ok" が表示され、接続を確認できた。

## 成果
- プロジェクトの雛形が完成し、最初のマイルストーンであるデータベース接続を達成した。

## 次のステップ
- データベースからキャラクターのリストを取得し、GUIのメインウィンドウに表示する機能の実装。

---

# 開発日記 - 2025/08/13

## 今日の目標
- `CharacterService`がデフォルトのデータベース接続を使用するように修正し、テストで検証する。
- 新しいメインウィンドウクラス (`MainWindow`) を作成し、キャラクターリスト表示と詳細表示機能を実装する。

## やったこと
1.  **`CharacterService`のデータベース接続の共通化**:
    -   `CharacterService`が`test_connection`ではなく、デフォルトのデータベース接続を使用するように修正した。
    -   TDDサイクル（Red-Green-Refactor）を適用し、新しいテストケース`testFetchCharacterDetails_DefaultConnection_ValidId_ReturnsData()`を追加して、この変更が正しく機能することを検証した。
    -   既存のテストケースもデフォルト接続を使用するように修正し、全てのテストがパスすることを確認した。
2.  **メインウィンドウの再構築と詳細表示機能の実装**:
    -   実験用の`main.cpp`から独立させ、`QMainWindow`を継承した新しい`MainWindow`クラス (`src/mainwindow.h`, `src/mainwindow.cpp`) を作成した。
    -   `MainWindow`クラス内でデータベース接続を確立し、UIの初期化、キャラクターリストの読み込みを行うようにした。
    -   `QSplitter`を使用して、左側にキャラクターリスト (`QTableView`)、右側にキャラクター詳細表示 (`QTextEdit`) を配置するUIを構築した。
    -   キャラクターリストで選択された行のIDを取得し、`CharacterService`を介して詳細情報を取得、詳細表示パネルに表示する機能を実装した。
    -   `main.cpp`を修正し、`MainWindow`クラスを起動するように変更した。
    -   `Sruighlea.pro`に新しい`mainwindow.h`と`mainwindow.cpp`を追加した。
    -   アプリケーションをビルドし、期待通りに動作することを確認した。

## 成果
- `CharacterService`がアプリケーションのメインデータベース接続を正しく利用できるようになり、テストによってその動作が保証された。
- 新しい`MainWindow`クラスを基盤とした、キャラクターリスト表示と詳細表示機能を備えたGUIアプリケーションのプロトタイプが完成した。これにより、今後のUI開発の明確な基盤ができた。

## 次のステップ
- `TASKS.md`に記載されている次の機能（例: 検索・フィルター機能、キャラクター追加機能など）の実装に着手する。